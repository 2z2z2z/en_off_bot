# –¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Telegram-–±–æ—Ç–∞

## –ü–æ—Ç–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `/start` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è; –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é, –∏–Ω–∞—á–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `WAITING_FOR_LOGIN`.
- –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`userStates`) –≤–µ–¥—É—Ç –¥–∏–∞–ª–æ–≥ –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤–≤–æ–¥–∞ –ª–æ–≥–∏–Ω–∞, –ø–∞—Ä–æ–ª—è, —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–≥—Ä—É (`parseGameUrl` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç GameDetails/Play), –¥–∞–ª–µ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–º (`READY`).
- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `user_data.json` (—á–µ—Ä–µ–∑ `loadUserData`/`saveUserData`), –≤ —Ç–æ–º —á–∏—Å–ª–µ cookies Encounter, –æ—á–µ—Ä–µ–¥—å –æ—Ç–≤–µ—Ç–æ–≤ –∏ —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

## –ì–ª–∞–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –º–µ–Ω—é
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (`createMainKeyboard`) —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫–∏: `–ó–∞–¥–∞–Ω–∏–µ`, `–°–µ–∫—Ç–æ—Ä–∞`, `üìä –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏`, `üîó –°–º–µ–Ω–∏—Ç—å –∏–≥—Ä—É`, `üë§ –°–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é`.
- `/reset`, `/test`, `/admin`, `/cancel` –∏ `/start` –∏–º–µ—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –Ω–∞ `bot.onText`, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ `bot.on('message')` —Å —É—á—ë—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è.
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è `ROOT_USER_ID`): –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π –∏ whitelist —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏ (`bot.on('callback_query')`).

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Encounter
- –ú–æ–¥—É–ª—å `encounter-api.js` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –æ—Ç–ø—Ä–∞–≤–∫—É –æ—Ç–≤–µ—Ç–æ–≤ (`sendAnswer`), –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π.
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç cookies –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–ª–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –æ—Ñ–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥—å: –æ—Ç–≤–µ—Ç—ã —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ `user.answerQueue`, –∞ `processAnswerQueue` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º ~1.2 —Å–µ–∫—É–Ω–¥—ã.

## –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –ø–æ Telegram chat id (–∫–ª—é—á –≤ `userData`), –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è `telegramUsername`, `telegramFirstName`, –º–µ—Ç–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
- –ê–¥–º–∏–Ω-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`admin_config.json`) —Ö—Ä–∞–Ω–∏—Ç whitelist –∏ —Ñ–ª–∞–≥ –º–æ–¥–µ—Ä–∞—Ü–∏–∏; –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.

## –û—à–∏–±–∫–∏ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- –û—à–∏–±–∫–∏ Telegram —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ `bot.on('error')` –∏ `bot.on('polling_error')`.
- –ü—Ä–∏ `SIGINT`/`SIGTERM` –±–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º.
